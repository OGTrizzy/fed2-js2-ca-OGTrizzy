(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();async function E({email:i,password:e}){const n=await fetch("https://v2.api.noroff.dev/auth/login",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${API_KEY}`},body:JSON.stringify({email:i,password:e})});if(!n.ok)throw new Error("login failed");return await n.json()}async function g(i){i.preventDefault();const e=document.getElementById("email").value,n=document.getElementById("password").value;if(!e||!n){alert("Please enter both email and password");return}try{const t=(await E({email:e,password:n})).accessToken;localStorage.setItem("accessToken",t),alert("Logged in successfully!"),window.location.href="/index.html"}catch(d){console.error("Login error:",d),alert("Login failed")}}const v="modulepreload",y=function(i){return"/"+i},f={},a=function(e,n,d){let t=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));t=Promise.allSettled(n.map(c=>{if(c=y(c),c in f)return;f[c]=!0;const u=c.endsWith(".css"),_=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${_}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":v,u||(l.as="script"),l.crossOrigin="",l.href=c,s&&l.setAttribute("nonce",s),document.head.appendChild(l),u)return new Promise((h,w)=>{l.addEventListener("load",h),l.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return t.then(o=>{for(const s of o||[])s.status==="rejected"&&r(s.reason);return e().catch(r)})};async function p(i=window.location.pathname){const e="/src/js/router/views/";switch(i){case"/":await a(()=>import(`${e}home.js`),[]);break;case"/auth/":await a(()=>import(`${e}auth.js`),[]);break;case"/auth/login/":await a(()=>import(`${e}login.js`),[]);break;case"/auth/register/":await a(()=>import(`${e}register.js`),[]);break;case"/post/":await a(()=>import(`${e}post.js`),[]);break;case"/post/edit/":await a(()=>import(`${e}postEdit.js`),[]);break;case"/post/create/":await a(()=>import(`${e}postCreate.js`),[]);break;case"/profile/":await a(()=>import(`${e}profile.js`),[]);break;default:await a(()=>import(`${e}notFound.js`),[])}}window.addEventListener("load",()=>{p(window.location.pathname)});window.addEventListener("popstate",()=>{p(window.location.pathname)});const m=document.forms.login;m&&m.addEventListener("submit",g);
